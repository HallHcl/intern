import React, { useRef } from "react";
import HTMLFlipBook from "react-pageflip";
import LayoutComponent from "../components/Layout";
import jsPDF from "jspdf";
import html2canvas from "html2canvas";
import "./Ebook.css";

const PrinterEbook = () => {
  const pages = [
    "ðŸ“– à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 1: à¹à¸™à¸°à¸™à¸³à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™\n\nà¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸™à¸µà¹‰à¸ˆà¸°à¸Šà¹ˆà¸§à¸¢à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™ 2 à¸£à¸¸à¹ˆà¸™à¸‚à¸­à¸‡à¸šà¸£à¸´à¸©à¸±à¸— Turbo Finance Co., Ltd. à¸žà¸£à¹‰à¸­à¸¡à¸—à¸±à¹‰à¸‡à¸‚à¹‰à¸­à¸”à¸µ-à¸‚à¹‰à¸­à¹€à¸ªà¸µà¸¢, à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¹à¸à¹‰à¸›à¸±à¸à¸«à¸²à¸•à¹ˆà¸²à¸‡à¹† à¹à¸¥à¸°à¸à¸²à¸£à¸”à¸¹à¹à¸¥à¸£à¸±à¸à¸©à¸²à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™",
    "ðŸ’¡ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 2: à¸£à¸¸à¹ˆà¸™à¸—à¸µà¹ˆ 1 à¸‚à¸­à¸‡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™\n\n- à¸‚à¹‰à¸­à¸”à¸µ: à¸›à¸£à¸°à¸«à¸¢à¸±à¸”à¸žà¸¥à¸±à¸‡à¸‡à¸²à¸™, à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§à¹ƒà¸™à¸à¸²à¸£à¸žà¸´à¸¡à¸žà¹Œà¸ªà¸¹à¸‡\n- à¸‚à¹‰à¸­à¹€à¸ªà¸µà¸¢: à¹€à¸ªà¸µà¸¢à¸‡à¸”à¸±à¸‡à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™\n\nà¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¸§à¸´à¸˜à¸µà¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹à¸¥à¸°à¸‚à¹‰à¸­à¸ˆà¸³à¸à¸±à¸”à¸‚à¸­à¸‡à¸£à¸¸à¹ˆà¸™à¸™à¸µà¹‰",
    "ðŸ”§ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 3: à¸£à¸¸à¹ˆà¸™à¸—à¸µà¹ˆ 2 à¸‚à¸­à¸‡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™\n\n- à¸‚à¹‰à¸­à¸”à¸µ: à¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸žà¸ªà¸¹à¸‡, à¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¸žà¸´à¸¡à¸žà¹Œà¸«à¸¥à¸²à¸¢à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™\n- à¸‚à¹‰à¸­à¹€à¸ªà¸µà¸¢: à¹ƒà¸Šà¹‰à¸«à¸¡à¸¶à¸à¹€à¸£à¹‡à¸§\n\nà¸„à¸³à¹à¸™à¸°à¸™à¸³à¹ƒà¸™à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹à¸¥à¸°à¸à¸²à¸£à¸›à¸£à¸±à¸šà¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²",
    "âš™ï¸ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 4: à¸£à¸¸à¹ˆà¸™à¸—à¸µà¹ˆ 3 à¸‚à¸­à¸‡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™\n\n- à¸‚à¹‰à¸­à¸”à¸µ: à¸„à¸¸à¸“à¸ à¸²à¸žà¸à¸²à¸£à¸žà¸´à¸¡à¸žà¹Œà¹€à¸¢à¸µà¹ˆà¸¢à¸¡, à¹€à¸«à¸¡à¸²à¸°à¸ªà¸³à¸«à¸£à¸±à¸šà¸žà¸´à¸¡à¸žà¹Œà¸ªà¸µ\n- à¸‚à¹‰à¸­à¹€à¸ªà¸µà¸¢: à¸‚à¸™à¸²à¸”à¹ƒà¸«à¸à¹ˆ, à¸£à¸²à¸„à¸²à¸ªà¸¹à¸‡\n\nà¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹à¸¥à¸°à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¸›à¸±à¸à¸«à¸²à¸—à¸±à¹ˆà¸§à¹„à¸›",
    "ðŸ–¨ï¸ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 5: à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸«à¸¡à¸¶à¸\n\n1. à¹€à¸›à¸´à¸”à¸à¸²à¸„à¸£à¸­à¸šà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™\n2. à¸–à¸­à¸”à¸•à¸¥à¸±à¸šà¸«à¸¡à¸¶à¸à¸—à¸µà¹ˆà¸«à¸¡à¸”à¹à¸¥à¹‰à¸§\n3. à¹ƒà¸ªà¹ˆà¸•à¸¥à¸±à¸šà¸«à¸¡à¸¶à¸à¹ƒà¸«à¸¡à¹ˆà¸—à¸µà¹ˆà¸•à¸£à¸‡à¸£à¸¸à¹ˆà¸™\n4. à¸›à¸´à¸”à¸à¸²à¸„à¸£à¸­à¸šà¹à¸¥à¸°à¸—à¸”à¸ªà¸­à¸šà¸à¸²à¸£à¸žà¸´à¸¡à¸žà¹Œ",
    "ðŸ”Œ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 6: à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™à¸à¸±à¸šà¹‚à¸™à¹‰à¸•à¸šà¸¸à¹Šà¸„\n\n1. à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸œà¹ˆà¸²à¸™ USB à¸«à¸£à¸·à¸­ Wi-Fi\n2. à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹à¸¥à¸°à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¹„à¸”à¸£à¹€à¸§à¸­à¸£à¹Œà¸ˆà¸²à¸à¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œà¸‚à¸­à¸‡à¸œà¸¹à¹‰à¸œà¸¥à¸´à¸•\n3. à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™à¹ƒà¸™à¸£à¸°à¸šà¸š Windows à¸«à¸£à¸·à¸­ macOS",
    "ðŸ” à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 7: à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸ à¸²à¸¢à¹ƒà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™\n\n- à¸ªà¹ˆà¸§à¸™à¸‚à¸­à¸‡à¸à¸²à¸£à¸žà¸´à¸¡à¸žà¹Œ\n- à¸à¸¥à¹„à¸à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸à¸£à¸°à¸”à¸²à¸©\n- à¸£à¸°à¸šà¸šà¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­\n\nà¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸ à¸²à¸¢à¹ƒà¸™à¸‚à¸­à¸‡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸›à¸£à¸´à¹‰à¸™à¹à¸¥à¸°à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸›à¸±à¸à¸«à¸²à¸—à¸µà¹ˆà¸­à¸²à¸ˆà¹€à¸à¸´à¸”à¸‚à¸¶à¹‰à¸™",
    "ðŸ› ï¸ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 8: à¸à¸²à¸£à¹à¸à¹‰à¸›à¸±à¸à¸«à¸²à¸à¸£à¸°à¸”à¸²à¸©à¸•à¸´à¸”\n\n1. à¹€à¸›à¸´à¸”à¸à¸²à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹à¸¥à¸°à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸²à¸£à¸•à¸´à¸”à¸‚à¸±à¸”à¸‚à¸­à¸‡à¸à¸£à¸°à¸”à¸²à¸©\n2. à¸«à¸²à¸à¸à¸£à¸°à¸”à¸²à¸©à¸•à¸´à¸”à¹ƒà¸«à¹‰à¸”à¸¶à¸‡à¸­à¸­à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸£à¸°à¸¡à¸±à¸”à¸£à¸°à¸§à¸±à¸‡\n3. à¸—à¸³à¸„à¸§à¸²à¸¡à¸ªà¸°à¸­à¸²à¸”à¸•à¸±à¸§à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸žà¸·à¹ˆà¸­à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸›à¸±à¸à¸«à¸²à¸à¸£à¸°à¸”à¸²à¸©à¸•à¸´à¸”à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•",
    "ðŸ§¹ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 9: à¸à¸²à¸£à¸¥à¹‰à¸²à¸‡à¸«à¸±à¸§à¸«à¸¡à¸¶à¸\n\n1. à¹ƒà¸Šà¹‰à¸œà¹‰à¸²à¸Šà¸¸à¸šà¸™à¹‰à¸³à¸«à¸¡à¸²à¸”à¹† à¹€à¸Šà¹‡à¸”à¸«à¸±à¸§à¸«à¸¡à¸¶à¸à¹€à¸šà¸²à¹†\n2. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸«à¸±à¸§à¸«à¸¡à¸¶à¸à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸­à¸¢à¹€à¸›à¸·à¹‰à¸­à¸™à¸«à¸£à¸·à¸­à¸à¸¸à¹ˆà¸™\n3. à¸—à¸”à¸ªà¸­à¸šà¸à¸²à¸£à¸žà¸´à¸¡à¸žà¹Œà¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸à¸—à¸³à¸„à¸§à¸²à¸¡à¸ªà¸°à¸­à¸²à¸”à¹à¸¥à¹‰à¸§",
    "âš ï¸ à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ 10: à¸›à¸±à¸à¸«à¸²à¸›à¸£à¸´à¹‰à¸™à¹à¸¥à¹‰à¸§à¹€à¸›à¹‡à¸™à¹€à¸ªà¹‰à¸™\n\n1. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸«à¸¡à¸¶à¸à¹„à¸¡à¹ˆà¹à¸«à¹‰à¸‡à¸«à¸£à¸·à¸­à¸«à¸¡à¸”\n2. à¸¥à¹‰à¸²à¸‡à¸«à¸±à¸§à¸žà¸´à¸¡à¸žà¹Œà¸«à¸£à¸·à¸­à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡à¸„à¸¸à¸“à¸ à¸²à¸žà¸à¸²à¸£à¸žà¸´à¸¡à¸žà¹Œà¹ƒà¸™à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²\n3. à¸«à¸²à¸à¸¢à¸±à¸‡à¸¡à¸µà¸›à¸±à¸à¸«à¸², à¸•à¸´à¸”à¸•à¹ˆà¸­à¸à¹ˆà¸²à¸¢à¸šà¸£à¸´à¸à¸²à¸£à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸‹à¹ˆà¸­à¸¡à¹à¸‹à¸¡à¸«à¸£à¸·à¸­à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸­à¸°à¹„à¸«à¸¥à¹ˆ"
  ];
  

  const flipbookRef = useRef();

  const downloadPDF = async () => {
    const pdf = new jsPDF("p", "mm", "a4");

    if (!flipbookRef.current) {
      console.error("flipbookRef.current à¹€à¸›à¹‡à¸™ null à¸«à¸£à¸·à¸­ undefined");
      return;
    }

    const book = flipbookRef.current.pageFlip();

    for (let i = 0; i < pages.length; i++) {
      book.turnToPage(i);
      await new Promise((r) => setTimeout(r, 100)); // à¸£à¸­à¹ƒà¸«à¹‰à¸«à¸™à¹‰à¸²à¹‚à¸«à¸¥à¸”à¹€à¸ªà¸£à¹‡à¸ˆ

      const page = book.getPage(i);
      if (!page || !page.element) {
        console.error(`à¹„à¸¡à¹ˆà¸žà¸šà¸­à¸‡à¸„à¹Œà¸›à¸£à¸°à¸à¸­à¸šà¸‚à¸­à¸‡à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ ${i + 1}`);
        continue;
      }

      const canvas = await html2canvas(page.element, {
        scale: 2,
        useCORS: true,
        backgroundColor: "#fff",
      });

      const imgData = canvas.toDataURL("image/png");
      const imgWidth = 210;
      const imgHeight = (canvas.height * imgWidth) / canvas.width;

      if (i > 0) pdf.addPage();
      pdf.addImage(imgData, "PNG", 0, 0, imgWidth, imgHeight);
    }

    pdf.save("Printer_Manual.pdf");
  };

  return (
    <LayoutComponent>
      <div className="ebook-container">
        <button className="download-btn" onClick={downloadPDF}>
          ðŸ“¥ Download PDF
        </button>

        <HTMLFlipBook width={400} height={600} className="flipbook" ref={flipbookRef}>
          {pages.map((content, index) => (
            <div key={index} className="page">
              <h2>{content}</h2>
              <p>à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸‚à¸­à¸‡à¸«à¸™à¹‰à¸² {index + 1}</p>
            </div>
          ))}
        </HTMLFlipBook>
      </div>
    </LayoutComponent>
  );
};

export default PrinterEbook;
